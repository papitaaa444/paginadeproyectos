<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <title>Con amor para ti ğŸŒ¸</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" />
  <style>
    :root {
      --rosa:#FF69B4; --rosa-claro:#FFB6C1; --magenta:#DB7093; --bg:#FFF0F5;
      --oscuro:#0b132b; --azul:#00d4ff; --verde:#1DB954; --gris:#1a1a1a; --oro:#FFD700;
    }
    * { box-sizing: border-box; }
    body { margin:0; font-family: Georgia, serif; background: var(--bg); color:#333; overflow-x: hidden; }
    .pantalla { display:none; padding:20px; text-align:center; min-height:100vh; }
    .btn { margin:10px; padding:12px 20px; border:none; border-radius:10px; font-weight:bold; cursor:pointer; }
    .btn-primario { background: var(--rosa); color: white; }
    .btn-rosa { background: var(--rosa-claro); color:white; }
    .btn-verde { background: var(--verde); color:white; }
    .btn-azul { background: var(--azul); color:black; }
    canvas { border:2px solid #ffc0cb; background:transparent; border-radius:8px; max-width: 100%; height: auto; touch-action: none; }
    input { padding:10px; font-size:16px; border:2px solid #eee; border-radius:8px; text-align:center; }
    #juego3 { background: var(--oscuro); color:white; }
    #juego4 { background:#0d1b2a; color:white; }
    #juego7 { background:#121212; color:white; }
    #juego8 { background: var(--gris); color:white; }
    #juego10 { background:#000014; color:white; }
    #cartaFinal { background:#FFFAF0; }
  </style>
</head>
<body>

<section id="bienvenida" class="pantalla" style="display:block;">
  <h1 style="color:var(--magenta)">Para mi persona favorita</h1>
  <p style="color:#BC8F8F">He preparado este pequeÃ±o rincÃ³n para ti.<br>Â¿Me permites mostrarte?</p>
  <button class="btn btn-rosa" onclick="mostrar('juego1')">Comenzar Viaje âœ¨</button>
</section>

<section id="juego1" class="pantalla">
  <h2 style="color:#CD5C5C">ğŸ’– Primer Reto: Afecto</h2>
  <div id="ronda1">
    <h3>Ronda 1: Un besito â¤ï¸</h3>
    <canvas id="canvasR1" width="600" height="260"></canvas>
    <button class="btn btn-rosa" onclick="pasarRonda(1)">Siguiente â¡ï¸</button>
  </div>
  <div id="ronda2" style="display:none;">
    <h3>Ronda 2: Un abrazo ğŸ’œ</h3>
    <canvas id="canvasR2" width="600" height="260"></canvas>
    <button class="btn btn-rosa" onclick="pasarRonda(2)">Siguiente â¡ï¸</button>
  </div>
  <div id="ronda3" style="display:none;">
    <h3>Busca 5 corazones rosados ğŸ’—</h3>
    <canvas id="canvasCorazones" width="600" height="350"></canvas>
    <p id="puntos">Puntos: 0/5</p>
    <button id="btnNext1" class="btn btn-primario" style="display:none;" onclick="mostrar('juego2')">Siguiente â¡ï¸</button>
  </div>
</section>

<section id="juego2" class="pantalla">
  <h2 style="color:var(--magenta)">ğŸ¨ Encuentra el color oculto</h2>
  <p id="intentos">Te quedan 3 intentos</p>
  <div id="opciones"></div>
  <p id="mensaje" style="color:#F08080"></p>
</section>

<section id="juego3" class="pantalla">
  <h2>ğŸš€ Viaje Estelar (El Principito)</h2>
  <p id="frase"></p>
  <div id="opcionesPrincipito"></div>
  <p id="estado"></p>
</section>

<section id="juego4" class="pantalla">
  <h2>âœ¨ PROTEGE NUESTRO CIELO âœ¨</h2>
  <canvas id="canvasEsquiva" width="600" height="450"></canvas>
  <p id="energia">EnergÃ­a del Amor: 0%</p>
</section>

<section id="juego5" class="pantalla">
  <h2>ğŸ’– Laberinto MÃ¡gico</h2>
  <p id="vidas">Vidas: â¤ï¸ â¤ï¸ â¤ï¸</p>
  <canvas id="canvasLaberinto" width="600" height="400"></canvas>
</section>

<section id="juego6" class="pantalla">
  <h2>ğŸŒ¸ JardÃ­n Final ğŸŒ¸</h2>
  <canvas id="canvasJardin" width="800" height="650"></canvas>
  <br><button class="btn btn-primario" onclick="mostrar('juego7')">Continuar â¡ï¸</button>
</section>

<section id="juego7" class="pantalla">
  <h2>ğŸµ Trivia Musical ğŸµ</h2>
  <p id="pregunta"></p>
  <div id="opcionesTrivia"></div>
</section>

<section id="juego8" class="pantalla">
  <h2>ğŸ¤ Completa la letra ğŸ¤</h2>
  <p id="tituloLetra" style="font-style:italic; color:#cccccc"></p>
  <p id="fraseLetra" style="font-weight:bold"></p>
  <div id="opcionesLetra"></div>
</section>

<section id="juego9" class="pantalla">
  <h2>ğŸ•µï¸ Adivina el Artista por Emojis</h2>
  <p id="emojiArtista" style="font-size:40px;"></p>
  <input id="entradaArtista" type="text" placeholder="Respuesta..." />
  <button class="btn btn-verde" onclick="verificarArtista()">Comprobar</button>
  <p id="errorArtista" style="color:red;"></p>
</section>

<section id="juego10" class="pantalla">
  <h2 style="color:var(--oro)">ğŸ‰ Â¡Felicidades! ğŸ‰</h2>
  <canvas id="canvasFuegos" width="800" height="650" style="background:#000014; border-color:#222;"></canvas>
  <button class="btn btn-rosa" onclick="mostrar('cartaFinal')">Abrir Carta Especial ğŸ’Œ</button>
</section>

<section id="cartaFinal" class="pantalla">
  <div style="position:relative; max-width:860px; margin:0 auto;">
    <canvas id="canvasCarta" width="820" height="520" style="background:#FFFAF0; border-radius:12px;"></canvas>
    <div style="position:absolute; left:50%; top:50%; transform:translate(-50%, -50%); width:90%; background:#FFEFF4; border:2px solid #FFC0CB; border-radius:12px; padding:20px; color:#505050;">
      <h3 style="color:#DB7093;">Mi carta especial...</h3>
      <div style="font-size:14px; line-height:1.6; text-align:justify; max-height:280px; overflow:auto;">
        QuizÃ¡ te demuestro muy poco y quizÃ¡ esto no sea nada o, si lo es, no sea suficiente... [Contenido de la carta de origen] [cite: 22, 23, 24, 25]
      </div>
      <button class="btn btn-primario" onclick="location.reload()">Finalizar con un abrazo ğŸ¤—</button>
    </div>
  </div>
</section>

<script>
// --- MOTOR DE NAVEGACIÃ“N Y TACTO ---
function mostrar(id){
  document.querySelectorAll('.pantalla').forEach(p=>p.style.display='none');
  document.getElementById(id).style.display='block';
}

function getPos(e, canvas) {
  const rect = canvas.getBoundingClientRect();
  const clientX = e.touches ? e.touches[0].clientX : e.clientX;
  const clientY = e.touches ? e.touches[0].clientY : e.clientY;
  const scaleX = canvas.width / rect.width;
  const scaleY = canvas.height / rect.height;
  return { x: (clientX - rect.left) * scaleX, y: (clientY - rect.top) * scaleY };
}

// --- JUEGO 1: CORAZONES HUYENTES ---
function pasarRonda(n){
  document.getElementById("ronda"+n).style.display="none";
  document.getElementById("ronda"+(n+1)).style.display="block";
}
const setupHuye = (id, emoji) => {
  const cvs = document.getElementById(id), ctx = cvs.getContext("2d");
  let h = {x:300, y:140};
  const draw = () => { ctx.clearRect(0,0,cvs.width,cvs.height); ctx.font="52px Arial"; ctx.fillText(emoji, h.x, h.y); };
  const mover = (e) => {
    const p = getPos(e, cvs);
    if(Math.hypot(p.x-h.x-25, p.y-h.y+25)<60){ h.x=Math.random()*500+50; h.y=Math.random()*180+50; draw(); }
  };
  cvs.addEventListener("mousemove", mover);
  cvs.addEventListener("touchstart", (e)=>{ e.preventDefault(); mover(e); }, {passive:false});
  draw();
};
setupHuye("canvasR1", "â¤ï¸"); setupHuye("canvasR2", "ğŸ’œ");

// Ronda 3: Spawn y click
(function(){
  const cvs = document.getElementById("canvasCorazones"), ctx = cvs.getContext("2d");
  let pts=0, arr=[], st;
  function spawn(){
    if(pts>=5) return;
    arr.push({x:Math.random()*560+20, y:Math.random()*320+20, t:["â¤ï¸","ğŸ’œ","ğŸ’—","ğŸŒ¸","âœ¨"][(Math.random()*5)|0]});
    ctx.clearRect(0,0,cvs.width,cvs.height); ctx.font="36px Arial"; arr.forEach(c=>ctx.fillText(c.t,c.x,c.y));
    st = setTimeout(spawn, 250);
  }
  const click = (e)=>{
    const p = getPos(e, cvs);
    arr.forEach((c,i)=>{
      if(Math.hypot(p.x-c.x-15, p.y-c.y+15)<45){
        if(c.t==="ğŸ’—"){ pts++; document.getElementById("puntos").innerText=`Puntos: ${pts}/5`; if(pts>=5) document.getElementById("btnNext1").style.display="inline"; }
        arr.splice(i,1);
      }
    });
  };
  cvs.addEventListener("mousedown", click);
  cvs.addEventListener("touchstart", (e)=>{ e.preventDefault(); click(e); }, {passive:false});
  const obs = new MutationObserver(()=>{ if(document.getElementById("ronda3").style.display==="block" && arr.length===0) spawn(); });
  obs.observe(document.body,{attributes:true, subtree:true});
})();

// --- JUEGO 2: COLORES (Troll original) ---
(function(){
  let ints = 3;
  const msgs = ["Â¿Azul como el mar? No creo... ğŸŒŠ", "El rojo es lindo, pero Â¿es ese? â¤ï¸", "Verde esperanza... pero esperanza de ganar ğŸŒ¿"];
  const ops = [{n:"Azul", c:"#ADD8E6"}, {n:"Rojo", c:"#FFB2B2"}, {n:"Verde", c:"#C2F0C2"}, {n:"Amarillo", c:"#FFFFE0"}];
  const div = document.getElementById("opciones");
  div.innerHTML = ops.map(o => `<button class="btn" style="background:${o.c}; width:120px;" onclick="checkC('${o.n}')">${o.n}</button>`).join("");
  window.checkC = (n) => {
    ints--;
    if(ints>0){
      document.getElementById("mensaje").innerText = msgs[Math.floor(Math.random()*msgs.length)];
      document.getElementById("intentos").innerText = `Te quedan ${ints} intentos`;
    } else {
      div.innerHTML = `<button class="btn btn-rosa" onclick="troll()">Tap tap aquÃ­, te equivocaste,\nera el color de fondo ğŸ¤¡</button>`;
      document.getElementById("intentos").innerText = "Â¡Se acabaron los intentos! ğŸ¤­";
    }
  };
  window.troll = () => {
    document.getElementById("juego2").innerHTML = `<h2 style="color:white; background:#FFC0CB; padding:50px; border-radius:12px;">Â¡Era ROSADO! ğŸ’—</h2><button class="btn btn-primario" onclick="mostrar('juego3')">Continuar âœ¨</button>`;
  };
})();

// --- JUEGO 3: PRINCIPITO (Frases completas) ---
(function(){
  const f = [
    {t:"Lo esencial es invisible...", c:"a los ojos", o:["al corazÃ³n","a la mente"]},
    {t:"Fue el tiempo que pasaste con tu...", c:"rosa", o:["zorro","planeta"]},
    {t:"Si vienes a las cuatro de la tarde, desde las tres empezarÃ© a ser...", c:"feliz", o:["puntual","amigo"]},
    {t:"Todas las personas mayores fueron al principio...", c:"niÃ±os", o:["sabios","soÃ±adores"]}
  ];
  let i = 0;
  window.checkP = (o)=>{ if(o===f[i].c){ i++; render(); } else { document.getElementById("estado").innerText="âŒ Intenta de nuevo"; } };
  function render(){
    if(i>=f.length){ document.getElementById("juego3").innerHTML = `<h2>âœ¨ Â¡Sabias palabras! âœ¨</h2><button class="btn btn-azul" onclick="mostrar('juego4')">Continuar ğŸš€</button>`; return; }
    document.getElementById("frase").innerText = `"${f[i].t}"`;
    const all = [...f[i].o, f[i].c].sort(()=>Math.random()-0.5);
    document.getElementById("opcionesPrincipito").innerHTML = all.map(o=>`<button class="btn" style="background:#1c2541; color:white;" onclick="checkP('${o}')">${o}</button>`).join(" ");
  }
  render();
})();

// --- JUEGO 4: ESQUIVA (Con Nubes y Rayos) ---
(function(){
  const cvs = document.getElementById("canvasEsquiva"), ctx = cvs.getContext("2d");
  let cor = {x:300, y:350}, pts = 0, jug = true, obsArr = [], rayos = [];
  const mover = (e) => { const p = getPos(e, cvs); cor.x = p.x; cor.y = p.y; };
  cvs.addEventListener("mousemove", mover);
  cvs.addEventListener("touchmove", (e)=>{ e.preventDefault(); mover(e); }, {passive:false});
  
  function spawn(){
    if(!jug) return;
    obsArr.push({x:Math.random()*580, y:-50, t:["â˜ï¸","â›ˆï¸","â„ï¸"][Math.floor(Math.random()*3)], vy:6+Math.random()*5, vx:Math.random()*8-4});
    if(Math.random()<0.3) rayos.push({x:-50, y:Math.random()*350+50});
    setTimeout(spawn, 220);
  }
  function loop(){
    if(!jug) return; ctx.clearRect(0,0,600,450); ctx.font="28px Arial"; ctx.fillText("â¤ï¸", cor.x, cor.y);
    obsArr.forEach(o=>{
      ctx.fillText(o.t, o.x, o.y); o.x+=o.vx; o.y+=o.vy;
      if(Math.abs(cor.x-o.x)<35 && Math.abs(cor.y-o.y)<35) pts=Math.max(0, pts-6);
    });
    rayos.forEach(r=>{
      ctx.fillStyle="#ffd60a"; ctx.fillText("âš¡", r.x, r.y); r.x+=15; ctx.fillStyle="black";
      if(Math.abs(cor.x-r.x)<30 && Math.abs(cor.y-r.y)<30) pts=Math.max(0, pts-15);
    });
    pts+=0.45; const ene = Math.min(100, pts); document.getElementById("energia").innerText=`EnergÃ­a: ${Math.floor(ene)}%`;
    if(ene>=100){ jug=false; document.getElementById("juego4").innerHTML += `<button class="btn btn-azul" onclick="mostrar('juego5')">Â¡CIELO DESPEJADO!</button>`; }
    else requestAnimationFrame(loop);
  }
  const observer = new MutationObserver(()=>{ if(document.getElementById("juego4").style.display==="block" && pts===0){ spawn(); loop(); } });
  observer.observe(document.body, {attributes:true, subtree:true});
})();

// --- JUEGO 5: LABERINTO (Muros MÃ³viles) ---
(function(){
  const cvs = document.getElementById("canvasLaberinto"), ctx = cvs.getContext("2d");
  let jug={x:30,y:40}, vds=3, jugnd=true;
  let muros=[{x:0,y:100,w:450,h:15,d:1},{x:150,y:200,w:450,h:15,d:-1},{x:0,y:300,w:450,h:15,d:1}];
  const mover = (e)=>{ const p=getPos(e, cvs); jug.x=p.x; jug.y=p.y; };
  cvs.addEventListener("mousemove", mover);
  cvs.addEventListener("touchmove", (e)=>{ e.preventDefault(); mover(e); }, {passive:false});

  function loop(){
    if(!jugnd) return; ctx.clearRect(0,0,600,400);
    ctx.fillStyle="#FF1493"; ctx.beginPath(); ctx.arc(555, 365, 25, 0, Math.PI*2); ctx.fill(); // Meta
    ctx.fillStyle="#FF69B4";
    muros.forEach(m=>{
      ctx.fillRect(m.x, m.y, m.w, m.h); m.w += 2*m.d; if(m.w>550||m.w<350) m.d*=-1;
      if(jug.x>m.x && jug.x<m.x+m.w && jug.y>m.y && jug.y<m.y+m.h){ jug={x:30,y:40}; vds--; document.getElementById("vidas").innerText="Vidas: "+("â¤ï¸ ".repeat(vds)); }
    });
    ctx.fillText("ğŸ’–", jug.x-10, jug.y+10);
    if(jug.x>530 && jug.y>340){ jugnd=false; document.getElementById("juego5").innerHTML = `<h2>Â¡ERES INCREÃBLE!</h2><button class="btn btn-primario" onclick="mostrar('juego6')">VER REGALO ğŸ</button>`; }
    else requestAnimationFrame(loop);
  }
  const observer = new MutationObserver(()=>{ if(document.getElementById("juego5").style.display==="block" && jugnd) loop(); });
  observer.observe(document.body, {attributes:true, subtree:true});
})();

// --- JUEGO 6: JARDÃN (Tulipanes Detallados) ---
(function(){
  const cvs = document.getElementById("canvasJardin"), ctx = cvs.getContext("2d");
  function drawTulip(x,y){
    ctx.strokeStyle="#5FA66B"; ctx.lineWidth=3; ctx.beginPath(); ctx.moveTo(x,y); ctx.lineTo(x,y+80); ctx.stroke();
    ctx.fillStyle="#FF69B4";
    // PÃ©talo central
    ctx.beginPath(); ctx.moveTo(x,y); ctx.quadraticCurveTo(x-10,y-30,x,y-50); ctx.quadraticCurveTo(x+10,y-30,x,y); ctx.fill();
    // Laterales
    ctx.beginPath(); ctx.moveTo(x,y); ctx.quadraticCurveTo(x-25,y-25,x-10,y-50); ctx.quadraticCurveTo(x-5,y-25,x,y); ctx.fill();
    ctx.beginPath(); ctx.moveTo(x,y); ctx.quadraticCurveTo(x+25,y-25,x+10,y-50); ctx.quadraticCurveTo(x+5,y-25,x,y); ctx.fill();
  }
  function escena(){
    ctx.fillStyle="#FFF9FB"; ctx.fillRect(0,0,800,650);
    ctx.fillStyle="#DB7093"; ctx.font="30px Georgia"; ctx.fillText("Para mi lugar seguro...", 280, 90);
    for(let i=0; i<25; i++) drawTulip(Math.random()*700+50, Math.random()*140+420);
  }
  const obs = new MutationObserver(()=>{ if(document.getElementById("juego6").style.display==="block") escena(); });
  obs.observe(document.body, {attributes:true, subtree:true});
})();

// --- TRIVIA, LETRAS Y ARTISTAS (Con Bad Bunny) ---
(function(){
  const t = [
    {p:"Â¿QuiÃ©n es el 'Rey del Pop'?", c:"Michael Jackson", o:["Elvis Presley","Michael Jackson","Prince"]},
    {p:"Â¿A quiÃ©n apodan 'El Sol de MÃ©xico'?", c:"Luis Miguel", o:["Chayanne","Luis Miguel","Alejandro FernÃ¡ndez"]}
  ];
  let ti=0;
  window.checkTrivia = (o)=>{ if(o===t[ti].c){ ti++; renderT(); } };
  function renderT(){
    if(ti>=t.length){ document.getElementById("juego7").innerHTML = `<h2>Â¡Trivia Lista!</h2><button class="btn btn-verde" onclick="mostrar('juego8')">Continuar</button>`; return; }
    document.getElementById("pregunta").innerText=t[ti].p;
    document.getElementById("opcionesTrivia").innerHTML=t[ti].o.map(opt=>`<button class="btn" style="background:#282828; color:white;" onclick="checkTrivia('${opt}')">${opt}</button>`).join(" ");
  }
  renderT();

  const r = [
    {t:"Luis Miguel", l:"Si tÃº me hubieras dicho siempre la verdad...", c:"si hubieras respondido cuando te llamÃ©", o:["si no te hubieras ido","si hubieras respondido cuando te llamÃ©"]},
    {t:"Coldplay", l:"Look at the stars, look how they shine for...", c:"you", o:["us","you"]}
  ];
  let ri=0;
  window.checkL = (o)=>{ if(o===r[ri].c){ ri++; renderL(); } };
  function renderL(){
    if(ri>=r.length){ document.getElementById("juego8").innerHTML = `<h2>Â¡Letras Listas!</h2><button class="btn btn-primario" onclick="mostrar('juego9')">Continuar</button>`; return; }
    document.getElementById("tituloLetra").innerText=r[ri].t; document.getElementById("fraseLetra").innerText=r[ri].l;
    document.getElementById("opcionesLetra").innerHTML=r[ri].o.map(o=>`<button class="btn" style="background:#333; color:white;" onclick="checkL('${o}')">${o}</button>`).join("<br>");
  }
  renderL();

  const art = [{e:"â˜€ï¸ ğŸ‡²ğŸ‡½ ğŸ™ï¸", c:"Luis Miguel"}, {e:"ğŸŒ™ ğŸ¤ ğŸ‘±ğŸ»â€â™€ï¸", c:"Ariana Grande"}, {e:"ğŸ‘ï¸ ğŸ° ğŸï¸", c:"Bad Bunny"}];
  let ai=0;
  window.verificarArtista = ()=>{
    if(document.getElementById("entradaArtista").value.toLowerCase().includes(art[ai].c.toLowerCase())){ ai++; renderA(); }
  };
  function renderA(){
    if(ai>=art.length){ document.getElementById("juego9").innerHTML = `<h2>Â¡Ganaste!</h2><button class="btn btn-primario" onclick="mostrar('juego10')">Final</button>`; return; }
    document.getElementById("emojiArtista").innerText=art[ai].e; document.getElementById("entradaArtista").value="";
  }
  renderA();
})();

// --- JUEGO 10: FUEGOS ARTIFICIALES ---
(function(){
  const cvs = document.getElementById("canvasFuegos"), ctx = cvs.getContext("2d");
  let p = [];
  function lanzar(){
    const x=Math.random()*cvs.width, y=Math.random()*300+100, col="hsl("+Math.random()*360+",100%,50%)";
    for(let i=0; i<80; i++){ p.push({x,y,vx:Math.random()*4-2, vy:Math.random()*4-2, v:100, c:col}); }
    setTimeout(lanzar, 1000);
  }
  function loop(){
    ctx.fillStyle="rgba(0,0,20,0.2)"; ctx.fillRect(0,0,cvs.width,cvs.height);
    p.forEach((it,i)=>{
      ctx.fillStyle=it.c; ctx.fillRect(it.x, it.y, 2, 2); it.x+=it.vx; it.y+=it.vy; it.vy+=0.02; it.v--;
      if(it.v<=0) p.splice(i,1);
    });
    requestAnimationFrame(loop);
  }
  const obs = new MutationObserver(()=>{ if(document.getElementById("juego10").style.display==="block" && p.length===0){ lanzar(); loop(); } });
  obs.observe(document.body, {attributes:true, subtree:true});
})();
</script>
</body>
</html>
