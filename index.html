<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <title>Con amor para ti üå∏</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    :root {
      --rosa:#FF69B4; --rosa-claro:#FFB6C1; --magenta:#DB7093; --bg:#FFF0F5;
      --oscuro:#0b132b; --azul:#00d4ff; --verde:#1DB954; --gris:#1a1a1a;
    }
    * { box-sizing: border-box; }
    body { margin:0; font-family: Georgia, serif; background: var(--bg); color:#333; }
    h1,h2 { margin:0 0 10px; }
    .pantalla { display:none; padding:26px; text-align:center; min-height:100vh; }
    .btn { display:inline-block; margin:10px; padding:12px 20px; border:none; border-radius:10px; font-weight:bold; cursor:pointer; }
    .btn-primario { background: var(--rosa); color: white; }
    .btn-rosa { background: var(--rosa-claro); color:white; }
    .btn-dorado { background:#ffca3a; color: var(--oscuro); }
    .btn-verde { background: var(--verde); color:white; }
    .btn-azul { background: var(--azul); color:black; }
    canvas { border:2px solid #ffc0cb; background:white; border-radius:8px; }
    input { padding:10px; font-size:16px; border:2px solid #eee; border-radius:8px; text-align:center; }
    /* Secciones con fondos tem√°ticos */
    #juego3 { background: var(--oscuro); color:white; }
    #juego4 { background:#0d1b2a; color:white; }
    #juego5 { background:#FFF5EE; }
    #juego6 { background:#FFF9FB; }
    #juego7 { background:#121212; color:white; }
    #juego8 { background: var(--gris); color:white; }
    #juego10 { background:#000033; color:white; }
    #cartaFinal { background:#FFFAF0; }
  </style>
</head>
<body>

  <!-- Bienvenida -->
  <section id="bienvenida" class="pantalla" style="display:block;">
    <h1 style="color:var(--magenta)">Para mi persona favorita</h1>
    <p style="color:#BC8F8F">He preparado este peque√±o rinc√≥n para ti.<br>¬øMe permites mostrarte?</p>
    <button class="btn btn-rosa" onclick="mostrar('juego1')">Comenzar Viaje ‚ú®</button>
  </section>

  <!-- Juego 1: Atrapa Corazones -->
  <section id="juego1" class="pantalla">
    <h2 style="color:#CD5C5C">üíñ Primer Reto: Afecto</h2>
    <canvas id="canvasCorazones" width="600" height="350"></canvas>
    <p id="puntos">Puntos: 0/5</p>
    <button id="btnNext1" class="btn btn-primario" style="display:none;" onclick="mostrar('juego2')">Siguiente ‚û°Ô∏è</button>
  </section>

  <!-- Juego 2: Colores (bot√≥n troll) -->
  <section id="juego2" class="pantalla">
    <h2 style="color:var(--magenta)">üé® Encuentra el color oculto</h2>
    <p id="intentos">Te quedan 3 intentos</p>
    <div id="opciones"></div>
    <p id="mensaje" style="color:#F08080"></p>
  </section>

  <!-- Juego 3: Viaje Estelar (El Principito) -->
  <section id="juego3" class="pantalla">
    <h2>üöÄ Viaje Estelar (El Principito)</h2>
    <p id="frase"></p>
    <div id="opcionesPrincipito"></div>
    <p id="estado"></p>
  </section>

  <!-- Juego 4: Esquiva Celestial -->
  <section id="juego4" class="pantalla">
    <h2>‚ú® PROTEGE NUESTRO CIELO ‚ú®</h2>
    <canvas id="canvasEsquiva" width="600" height="450"></canvas>
    <p id="energia">Energ√≠a del Amor: 0%</p>
  </section>

  <!-- Juego 5: Laberinto din√°mico -->
  <section id="juego5" class="pantalla">
    <h2 style="color:#FF1493">üíñ Laberinto M√°gico Din√°mico</h2>
    <p id="vidas">Vidas: ‚ù§Ô∏è ‚ù§Ô∏è ‚ù§Ô∏è</p>
    <canvas id="canvasLaberinto" width="600" height="400"></canvas>
  </section>

  <!-- Juego 6: Jard√≠n final -->
  <section id="juego6" class="pantalla">
    <h2 style="color:var(--magenta)">üå∏ Jard√≠n Final üå∏</h2>
    <canvas id="canvasJardin" width="800" height="650"></canvas>
    <div>
      <button class="btn btn-primario" onclick="mostrar('juego7')">Siguiente ‚ûú</button>
    </div>
  </section>

  <!-- Juego 7: Trivia musical -->
  <section id="juego7" class="pantalla">
    <h2 style="color:var(--verde)">üéµ Trivia Musical üéµ</h2>
    <p id="pregunta"></p>
    <div id="opcionesTrivia"></div>
  </section>

  <!-- Juego 8: Completar letra -->
  <section id="juego8" class="pantalla">
    <h2 style="color:#FF4B2B">üé§ Completa la letra üé§</h2>
    <p id="tituloLetra" style="font-style:italic; color:#cccccc"></p>
    <p id="fraseLetra" style="font-weight:bold"></p>
    <div id="opcionesLetra"></div>
  </section>

  <!-- Juego 9: Adivina el artista por emojis -->
  <section id="juego9" class="pantalla">
    <h2>üïµÔ∏è Adivina el Artista por Emojis</h2>
    <p id="emojiArtista" style="font-size:40px;"></p>
    <input id="entradaArtista" type="text" placeholder="Escribe tu respuesta..." />
    <button class="btn btn-verde" onclick="verificarArtista()">Comprobar</button>
    <p id="errorArtista" style="color:red"></p>
  </section>

  <!-- Juego 10: Fuegos artificiales y canciones -->
  <section id="juego10" class="pantalla">
    <h2 style="color:#FFD700">üéâ ¬°Felicidades! üéâ</h2>
    <p style="color:#ADD8E6; max-width:780px; margin:8px auto;">
      Estos peque√±os retos eran para mostrarte 5 canciones que me recuerdan a ti:
      <br/>1. The Boy Is Mine - Ariana Grande
      <br/>2. Lo Que Siento - Cuco
      <br/>3. Te Amar√© - Silvio Rodr√≠guez
      <br/>4. Obsesionado - Farruko (con Alexio La Bestia)
      <br/>5. Die With A Smile - Lady Gaga y Bruno Mars
    </p>
    <canvas id="canvasFuegos" width="800" height="650"></canvas>
    <button class="btn btn-rosa" onclick="mostrar('cartaFinal')">Abrir Carta Especial üíå</button>
  </section>

  <!-- Carta final con corazones -->
  <section id="cartaFinal" class="pantalla">
    <h2 style="color:var(--magenta)">Mi Carta Especial...</h2>
    <div style="position:relative; max-width:820px; margin:0 auto;">
      <canvas id="canvasCarta" width="800" height="500" style="background:#FFFAF0; border:none"></canvas>
      <div style="position:absolute; left:50%; top:50%; transform:translate(-50%, -50%);
                  width:600px; max-width:92%; background:#FFEFF4; border:2px solid #FFC0CB; border-radius:12px;
                  box-shadow:0 10px 25px rgba(219,112,147,0.25); color:#505050; text-align:center; padding:20px;">
        <h3 style="margin:0 0 12px; color:var(--magenta)">Mi carta especial...</h3>
        <div style="font-family:Verdana, sans-serif; font-size:14px; line-height:1.6; text-align:justify; color:#505050; max-height:260px; overflow:auto;">
          Quiz√° te demuestro muy poco y quiz√° esto no sea nada o, si lo es, no sea suficiente. No es que no quiera expresar o mostrar todo lo que siento.
          Realmente, hay muchas cosas que siento y que quisiera expresar, pero creo que de verdad me quedo corta, jajaja, ir√≥nico ¬øcierto?
          Haciendo esto cayeron varias de mis l√°grimas, no lo voy a negar. Muchas cosas me asustan y, entre esas, que me destrocen, porque una vez ya llegu√© a eso.
          Al menos, si llego a caer ah√≠ otra vez, que no sea por ti, por favor. Quiero algo bonito e igual siento que quiz√° si no funciona pueda ser porque soy yo el problema.
          Siendo as√≠, te pido disculpas, quiz√° por el miedo a llorar me limit√© a ciertas cosas. Bueno, pero quiero que sepas que hay muchos sentimientos,
          muchas emociones que me haces sentir. Me haces feliz y quiero poder hacerte igual de feliz. Gracias por estar y por aguantarme.
          S√© que me pongo tonta y sigo mejorando por ti para ser y poder entregarte lo mejor. ¬°Muakkkk!
        </div>
        <button class="btn btn-primario" onclick="finalizarCarta()">Finalizar con un abrazo virtual ü§ó</button>
      </div>
    </div>
  </section>

  <script>
    // Navegaci√≥n general
    function mostrar(id) {
      document.querySelectorAll('.pantalla').forEach(p => p.style.display = 'none');
      document.getElementById(id).style.display = 'block';
      const input = document.querySelector(`#${id} input`); if (input) input.focus();
    }

    // Juego 1: Atrapa Corazones
    (function(){
      const canvas = document.getElementById("canvasCorazones");
      const ctx = canvas.getContext("2d");
      const puntosLbl = document.getElementById("puntos");
      const nextBtn = document.getElementById("btnNext1");
      let puntos = 0, corazones = [];
      function dibujar(){
        ctx.clearRect(0,0,600,350);
        ctx.font = "35px Arial";
        corazones.forEach(c => ctx.fillText(c.tipo, c.x, c.y));
      }
      function lanzar(){
        if(puntos>=5) return;
        const x = Math.random()*550+50, y = Math.random()*300+50;
        const tipos = ["‚ù§Ô∏è","üíú","üíó","üå∏","‚ú®"];
        const tipo = tipos[Math.floor(Math.random()*tipos.length)];
        corazones.push({x,y,tipo}); dibujar();
        setTimeout(lanzar,700);
      }
      canvas.addEventListener("click",(e)=>{
        const rect = canvas.getBoundingClientRect(); const x=e.clientX-rect.left; const y=e.clientY-rect.top;
        corazones.forEach((c,i)=>{
          if(Math.abs(x-c.x)<20 && Math.abs(y-c.y)<20){
            if(c.tipo==="üíó"){
              puntos++; puntosLbl.innerText = `Puntos: ${puntos}/5`;
              corazones.splice(i,1); dibujar();
              if(puntos>=5) nextBtn.style.display="inline-block";
            }
          }
        });
      });
      lanzar();
    })();

    // Juego 2: Colores
    (function(){
      const intentosLbl = document.getElementById("intentos");
      const opcionesDiv = document.getElementById("opciones");
      const msg = document.getElementById("mensaje");
      let intentos = 3;
      const trollMsgs = [
        "¬øAzul como el mar? No creo... üåä",
        "El rojo es lindo, pero ¬øes ese? ‚ù§Ô∏è",
        "Verde esperanza... pero esperanza de ganar üåø"
      ];
      const opciones = [
        {n:"Azul", c:"#ADD8E6"},
        {n:"Rojo", c:"#FFB2B2"},
        {n:"Verde", c:"#C2F0C2"},
        {n:"Amarillo", c:"#FFFFE0"}
      ];
      opcionesDiv.innerHTML = opciones.map(o =>
        `<button class="btn" style="background:${o.c}; width:120px;" onclick="verificarColor('${o.n}')">${o.n}</button>`
      ).join("");
      window.verificarColor = (elegido) => {
        intentos--;
        if(intentos>0){
          msg.innerText = trollMsgs[Math.floor(Math.random()*trollMsgs.length)];
          intentosLbl.innerText = `No... Intenta otra vez (${intentos})`;
        } else {
          opcionesDiv.innerHTML = "";
          intentosLbl.innerText = "¬°Se acabaron los intentos! ü§≠";
          const btn = document.createElement("button");
          btn.className="btn btn-rosa";
          btn.textContent = "Tap tap aqu√≠, te equivocaste,\nera el color de fondo ü§°";
          btn.onclick = () => {
            document.getElementById("juego2").innerHTML = `
              <h2 style="color:white; background:#FFC0CB; padding:50px; border-radius:12px;">¬°Era obvio! El color era ROSADO üíó</h2>
              <button class="btn btn-primario" onclick="mostrar('juego3')">Continuar ‚ú®</button>
            `;
          };
          opcionesDiv.appendChild(btn);
        }
      };
    })();

    // Juego 3: Viaje Estelar (El Principito)
    (function(){
      const frases = [
        {texto:"Lo esencial es invisible...", correcta:"a los ojos", opciones:["al coraz√≥n","a la mente","al alma"]},
        {texto:"Fue el tiempo que pasaste con tu...", correcta:"rosa", opciones:["planeta","zorro","orgullo"]},
        {texto:"Si vienes, por ejemplo, a las cuatro de la tarde, desde las tres empezar√© a ser...", correcta:"feliz", opciones:["puntual","inquieto","amigo"]},
        {texto:"Todas las personas mayores fueron al principio...", correcta:"ni√±os", opciones:["sabios","peque√±os","so√±adores"]}
      ];
      let idx = 0;
      function render(){
        if(idx>=frases.length){
          document.getElementById("juego3").innerHTML = `
            <h2 style="color:#ffca3a;">‚ú® ¬°Sabias palabras! ‚ú®</h2>
            <button class="btn btn-dorado" onclick="mostrar('juego4')">Continuar el viaje üöÄ</button>
          `;
          return;
        }
        const f = frases[idx];
        document.getElementById("frase").innerText = `"${f.texto}"`;
        const all = [...f.opciones, f.correcta].sort(()=>Math.random()-0.5);
        document.getElementById("opcionesPrincipito").innerHTML = all.map(
          o => `<button class="btn" style="background:#1c2541; color:white;" onclick="verificarPrincipito('${o}')">${o}</button>`
        ).join(" ");
      }
      window.verificarPrincipito = (o)=>{
        const f = frases[idx];
        if(o===f.correcta){
          document.getElementById("estado").innerText="‚úÖ Correcto";
          idx++; setTimeout(render,500);
        } else {
          document.getElementById("estado").innerText="‚ùå Intenta de nuevo";
        }
      };
      // cuando se muestre la pantalla
      const obs = new MutationObserver((muts)=>{
        if(document.getElementById("juego3").style.display==="block") render();
      });
      obs.observe(document.body,{attributes:true, subtree:true, attributeFilter:["style"]});
    })();

    // Juego 4: Esquiva Celestial
    (function(){
      const canvas = document.getElementById("canvasEsquiva");
      const ctx = canvas.getContext("2d");
      const energiaLbl = document.getElementById("energia");
      const corazon = {x:300,y:350};
      let obstaculos = [], rayos = [], puntos = 0, jugando = true;
      canvas.addEventListener("mousemove", (e)=>{
        const r = canvas.getBoundingClientRect();
        corazon.x = e.clientX - r.left; corazon.y = e.clientY - r.top;
      });
      function clima(){
        if(!jugando) return;
        const x = Math.random()*580+20;
        const tipos = ["‚òÅÔ∏è","‚õàÔ∏è","‚ùÑÔ∏è"];
        obstaculos.push({x,y:-50,tipo:tipos[Math.floor(Math.random()*tipos.length)],vy:6+Math.random()*5,vx:(Math.random()*8-4)});
        if(Math.random()<0.3){
          const y = Math.random()*350+50;
          rayos.push({x:-50,y});
        }
        setTimeout(clima,250);
      }
      function frame(){
        ctx.clearRect(0,0,600,450);
        ctx.font="28px Arial"; ctx.fillText("‚ù§Ô∏è",corazon.x,corazon.y);
        obstaculos.forEach(o=>{
          ctx.font="35px Arial"; ctx.fillText(o.tipo,o.x,o.y);
          o.x+=o.vx; o.y+=o.vy;
          if(Math.abs(corazon.x-o.x)<35 && Math.abs(corazon.y-o.y)<35) puntos=Math.max(0,puntos-5);
        });
        obstaculos = obstaculos.filter(o=>o.y<500);
        rayos.forEach(r=>{
          ctx.font="30px Arial"; ctx.fillStyle="#ffd60a"; ctx.fillText("‚ö°",r.x,r.y); ctx.fillStyle="black";
          r.x+=15; if(Math.abs(corazon.x-r.x)<30 && Math.abs(corazon.y-r.y)<30) puntos=Math.max(0,puntos-15);
        });
        rayos = rayos.filter(r=>r.x<650);
        puntos+=0.35; const energia = Math.min(100,puntos);
        energiaLbl.innerText = `Energ√≠a del Amor: ${Math.floor(energia)}%`;
        if(energia>=100){
          jugando=false;
          document.getElementById("juego4").innerHTML = `
            <h2 style="color:${getComputedStyle(document.documentElement).getPropertyValue('--azul')}">¬°CIELO DESPEJADO! ‚ú®</h2>
            <button class="btn btn-azul" onclick="mostrar('juego5')">SIGUIENTE RETO ‚ûî</button>
          `;
        } else { requestAnimationFrame(frame); }
      }
      // inicializa al entrar
      const obs = new MutationObserver(()=>{
        if(document.getElementById("juego4").style.display==="block"){
          obstaculos=[]; rayos=[]; puntos=0; jugando=true; clima(); frame();
        }
      });
      obs.observe(document.body,{attributes:true, subtree:true, attributeFilter:["style"]});
    })();

    // Juego 5: Laberinto
    (function(){
      const canvas = document.getElementById("canvasLaberinto");
      const ctx = canvas.getContext("2d");
      const vidasLbl = document.getElementById("vidas");
      let jugador={x:30,y:40}, vidas=3, jugando=true;
      const meta={x:530,y:340,w:50,h:50};
      let muros=[{x:0,y:100,w:450,h:15,dir:1},{x:150,y:200,w:450,h:15,dir:-1},{x:0,y:300,w:450,h:15,dir:1}];
      let obst=[{x:300,y:150,vx:8,vy:3,t:"‚ú®"},{x:300,y:250,vx:-8,vy:-3,t:"üí´"}];
      canvas.addEventListener("mousemove",(e)=>{const r=canvas.getBoundingClientRect(); jugador.x=e.clientX-r.left; jugador.y=e.clientY-r.top;});
      function morir(){ vidas--; vidasLbl.innerText="Vidas: "+("‚ù§Ô∏è ".repeat(vidas)); jugador.x=30; jugador.y=40; if(vidas<=0){ vidas=3; vidasLbl.innerText="Vidas: ‚ù§Ô∏è ‚ù§Ô∏è ‚ù§Ô∏è"; } }
      function loop(){
        if(!jugando) return;
        ctx.clearRect(0,0,600,400);
        // meta
        ctx.fillStyle="#FF1493"; ctx.beginPath(); ctx.arc(meta.x+25,meta.y+25,25,0,Math.PI*2); ctx.fill();
        // jugador
        ctx.font="22px Arial"; ctx.fillText("üíñ",jugador.x,jugador.y);
        // muros
        ctx.fillStyle="#FF69B4";
        muros.forEach(m=>{
          ctx.fillRect(m.x,m.y,m.w,m.h);
          m.w += 2*m.dir; if(m.w>550||m.w<350) m.dir*=-1;
          if(jugador.x>m.x && jugador.x<m.x+m.w && jugador.y>m.y && jugador.y<m.y+m.h) morir();
        });
        // obst
        obst.forEach(o=>{
          ctx.font="25px Arial"; ctx.fillText(o.t,o.x,o.y);
          o.x+=o.vx; o.y+=o.vy; if(o.x>580||o.x<20) o.vx*=-1; if(o.y>380||o.y<20) o.vy*=-1;
          if(Math.abs(jugador.x-o.x)<25 && Math.abs(jugador.y-o.y)<25) morir();
        });
        if(jugador.x>meta.x && jugador.x<meta.x+meta.w && jugador.y>meta.y && jugador.y<meta.y+meta.h){
          jugando=false;
          document.getElementById("juego5").innerHTML = `
            <h2 style="color:#FF69B4">¬°ERES INCRE√çBLE! ‚ù§Ô∏è</h2>
            <button class="btn btn-primario" onclick="mostrar('juego6')">VER REGALO FINAL üéÅ</button>
          `;
        } else { requestAnimationFrame(loop); }
      }
      const obs = new MutationObserver(()=>{
        if(document.getElementById("juego5").style.display==="block"){
          jugador={x:30,y:40}; vidas=3; jugando=true; muros=[{x:0,y:100,w:450,h:15,dir:1},{x:150,y:200,w:450,h:15,dir:-1},{x:0,y:300,w:450,h:15,dir:1}];
          obst=[{x:300,y:150,vx:8,vy:3,t:"‚ú®"},{x:300,y:250,vx:-8,vy:-3,t:"üí´"}]; vidasLbl.innerText="Vidas: ‚ù§Ô∏è ‚ù§Ô∏è ‚ù§Ô∏è"; loop();
        }
      }); obs.observe(document.body,{attributes:true, subtree:true, attributeFilter:["style"]});
    })();

    // Juego 6: Jard√≠n final
    (function(){
      const canvas = document.getElementById("canvasJardin");
      const ctx = canvas.getContext("2d");
      const paleta=["#FFB6C1","#DB7093","#FF69B4","#FF1493","#FFC0CB"];
      function tulipan(x,y){
        const c = paleta[(Math.random()*paleta.length)|0];
        ctx.strokeStyle="#7FB07F"; ctx.lineWidth=3; ctx.beginPath(); ctx.moveTo(x,y); ctx.lineTo(x,y+130); ctx.stroke();
        ctx.fillStyle=c; ctx.beginPath(); ctx.arc(x,y,20,0,Math.PI*2); ctx.fill();
      }
      function escena(){
        ctx.clearRect(0,0,800,650);
        ctx.fillStyle="#DB7093"; ctx.font="30px Georgia"; ctx.fillText("Para mi lugar seguro...",300,80);
        ctx.fillStyle="#BC8F8F"; ctx.font="14px Arial"; ctx.fillText("Eres lo m√°s bonito de mi vida.",300,130);
        for(let i=0;i<25;i++){ tulipan(Math.random()*700+50,Math.random()*170+350); }
      }
      function petalo(){
        const x=Math.random()*800, size=10+Math.random()*10; let y=-10;
        (function caer(){ ctx.font=size+"px Arial"; ctx.fillText("üå∏",x,y); y+=2; if(y<650) requestAnimationFrame(caer); })();
        setTimeout(petalo,500);
      }
      function brillo(){
        const x=Math.random()*780+20, y=Math.random()*550+50; ctx.font="12px Arial"; ctx.fillStyle="#FFD700"; ctx.fillText("‚ú®",x,y);
        setTimeout(brillo,400);
      }
      const obs = new MutationObserver(()=>{
        if(document.getElementById("juego6").style.display==="block"){ escena(); petalo(); brillo(); }
      }); obs.observe(document.body,{attributes:true, subtree:true, attributeFilter:["style"]});
    })();

    // Juego 7: Trivia
    (function(){
      const preguntas = [
        {p:"¬øQui√©n es conocido como el 'Rey del Pop'?", c:"Michael Jackson", o:["Elvis Presley","Michael Jackson","Prince","Bruno Mars"]},
        {p:"¬øA qu√© g√©nero pertenece 'Bohemian Rhapsody'?", c:"Rock", o:["Pop","Jazz","Rock","√ìpera"]},
        {p:"¬øA qui√©n apodan 'El Sol de M√©xico'?", c:"Luis Miguel", o:["Alejandro Fern√°ndez","Luis Miguel","Chayanne","Cristian Castro"]}
      ]; let idx=0;
      function render(){
        if(idx>=preguntas.length){
          document.getElementById("juego7").innerHTML = `
            <h2 style="color:${getComputedStyle(document.documentElement).getPropertyValue('--verde')}">¬°Has completado la Trivia Musical! üé∂</h2>
            <button class="btn btn-verde" onclick="mostrar('juego8')">Continuar ‚û°Ô∏è</button>
          `;
          return;
        }
        const q = preguntas[idx];
        document.getElementById("pregunta").innerText = q.p;
        document.getElementById("opcionesTrivia").innerHTML = q.o.map(
          opt => `<button class="btn" style="background:#282828; color:white;" onclick="verificarTrivia('${opt}')">${opt}</button>`
        ).join(" ");
      }
      window.verificarTrivia = (o)=>{ if(o===preguntas[idx].c){ idx++; render(); } else { alert("‚ùå Incorrecto, intenta otra vez"); } };
      const obs = new MutationObserver(()=>{ if(document.getElementById("juego7").style.display==="block") render(); });
      obs.observe(document.body,{attributes:true, subtree:true, attributeFilter:["style"]});
    })();

    // Juego 8: Completar letra
    (function(){
      const retos = [
        {t:"Ahora te puedes marchar - Luis Miguel", l:"Si t√∫ me hubieras dicho siempre la verdad...", c:"si hubieras respondido cuando te llam√©", o:["si no te hubieras ido de mi lado","si hubieras respondido cuando te llam√©","si me hubieras amado un poco m√°s"]},
        {t:"Yellow - Coldplay", l:"Look at the stars, look how they shine for...", c:"you", o:["us","me","you"]}
      ]; let idx=0;
      function render(){
        if(idx>=retos.length){
          document.getElementById("juego8").innerHTML = `
            <h2 style="color:#FF4B2B">¬°Has completado el reto musical! üé∂</h2>
            <button class="btn btn-primario" onclick="mostrar('juego9')">Continuar ‚û°Ô∏è</button>
          `; return;
        }
        const r = retos[idx];
        document.getElementById("tituloLetra").innerText = r.t;
        document.getElementById("fraseLetra").innerText = r.l;
        document.getElementById("opcionesLetra").innerHTML = r.o.map(
          o=>`<button class="btn" style="background:#333; color:white; width:320px;" onclick="verificarLetra('${o}')">${o}</button>`
        ).join("<br/>");
      }
      window.verificarLetra = (o)=>{ if(o===retos[idx].c){ idx++; render(); } else { alert("‚ùå Incorrecto, intenta otra vez"); } };
      const obs = new MutationObserver(()=>{ if(document.getElementById("juego8").style.display==="block") render(); });
      obs.observe(document.body,{attributes:true, subtree:true, attributeFilter:["style"]});
    })();

    // Juego 9: Adivina artista por emojis
    (function(){
      const retos = [
        {emoji:"‚òÄÔ∏è üá≤üáΩ üéôÔ∏è", c:"Luis Miguel"},
        {emoji:"üåô üé§ üë±üèª‚Äç‚ôÄÔ∏è üíÖ", c:"Ariana Grande"},
        {emoji:"üé∏ üé© üî´ üåπ", c:"Guns N' Roses"}
      ]; let idx=0;
      function render(){
        if(idx>=retos.length){
          document.getElementById("juego9").innerHTML = `
            <h2>üéâ ¬°Has adivinado todos los artistas! üéâ</h2>
            <button class="btn btn-primario" onclick="mostrar('juego10')">Continuar ‚û°Ô∏è</button>
          `; return;
        }
        const r = retos[idx]; document.getElementById("emojiArtista").innerText=r.emoji;
        document.getElementById("entradaArtista").value=""; document.getElementById("errorArtista").innerText="";
      }
      window.verificarArtista = ()=>{
        const r = retos[idx]; const v = document.getElementById("entradaArtista").value.trim().toLowerCase();
        if(v===r.c.toLowerCase()){ idx++; render(); } else { document.getElementById("errorArtista").innerText="¬°Casi! Intenta de nuevo"; }
      };
      const obs = new MutationObserver(()=>{ if(document.getElementById("juego9").style.display==="block") render(); });
      obs.observe(document.body,{attributes:true, subtree:true, attributeFilter:["style"]});
    })();

    // Juego 10: Fuegos artificiales
    (function(){
      const canvas = document.getElementById("canvasFuegos");
      const ctx = canvas.getContext("2d");
      let partes=[];
      function lanzar(){
        const x=Math.random()*800, y=Math.random()*300+100;
        const pal=["#FFD700","#FF4500","#FF00FF","#00FFFF","#ADFF2F","#FFFFFF"];
        const color = pal[(Math.random()*pal.length)|0];
        for(let i=0;i<50;i++){
          partes.push({x,y,vx:(Math.random()-0.5)*6,vy:(Math.random()-0.5)*6,vida:100,color});
        }
        setTimeout(lanzar,1500);
      }
      function loop(){
        ctx.clearRect(0,0,800,650);
        partes.forEach(p=>{
          ctx.fillStyle=p.color; ctx.fillRect(p.x,p.y,2,2);
          p.x+=p.vx; p.y+=p.vy; p.vida--;
        });
        partes = partes.filter(p=>p.vida>0);
        requestAnimationFrame(loop);
      }
      const obs = new MutationObserver(()=>{ if(document.getElementById("juego10").style.display==="block"){ partes=[]; lanzar(); loop(); } });
      obs.observe(document.body,{attributes:true, subtree:true, attributeFilter:["style"]});
    })();

    // Carta final: corazones flotantes
    (function(){
      const canvas = document.getElementById("canvasCarta");
      const ctx = canvas.getContext("2d");
      let hearts=[];
      function newHeart(){
        const x=Math.random()*canvas.width, y=canvas.height+Math.random()*120, size=18+Math.random()*12;
        const vx=(Math.random()*1.0-0.5), vy=-(1.2+Math.random()*1.8);
        const col=["#FFB6C1","#FFC0CB","#DB7093"][(Math.random()*3)|0];
        hearts.push({x,y,size,vx,vy,col});
      }
      function drawHeart(h){ ctx.font=`${h.size}px Arial`; ctx.fillStyle=h.col; ctx.fillText("üíó",h.x,h.y); }
      function loop(){
        ctx.clearRect(0,0,canvas.width,canvas.height);
        for(let i=0;i<6;i++){ ctx.font="12px Arial"; ctx.fillStyle="#FFD700"; ctx.fillText("‚ú®", Math.random()*canvas.width, Math.random()*canvas.height); }
        for(let i=hearts.length-1;i>=0;i--){
          const c=hearts[i]; c.x+=c.vx; c.y+=c.vy; drawHeart(c);
          if(c.y<-40) hearts.splice(i,1);
        }
        requestAnimationFrame(loop);
      }
      function start(){
        hearts=[]; for(let i=0;i<28;i++) newHeart(); loop(); setInterval(newHeart,1200);
      }
      window.finalizarCarta = ()=>{
        document.getElementById("cartaFinal").innerHTML = `
          <div style="height:100vh; display:flex; align-items:center; justify-content:center; flex-direction:column; background:#FFFAF0; color:${getComputedStyle(document.documentElement).getPropertyValue('--magenta')}">
            <h2>Gracias por leer üíå</h2>
            <p style="color:#BC8F8F">‚ÄúLo esencial es invisible a los ojos‚Äù ‚ú®</p>
          </div>`;
      };
      const obs = new MutationObserver(()=>{ if(document.getElementById("cartaFinal").style.display==="block") start(); });
      obs.observe(document.body,{attributes:true, subtree:true, attributeFilter:["style"]});
    })();
  </script>
</body>
</html>



